/**
 * ÂèòÈáèÔºöelmck: ÂøÖÂ°´ÔºåË¥¶Âè∑cookie
 * cron 0 0 11 * * *
 * 2023.6.26 Êõ¥Êñ∞ÔºöÈ¶ñÊ¨°ÂèëÂ∏ÉÔºõ
 * 2023.7.7 Êõ¥Êñ∞ÔºöÊ∑ªÂä†Âª∂Êó∂ÔºåÂ¢ûÂä† cookie Â§±ÊïàÈ™åËØÅ
 */

const $ = new Env('Êû´Âè∂_È•ø‰∫Ü‰πàÁâπÁ∫ßÂé®Â∏à');

function _0x1345(_0x526b34,_0x134597){const _0x4afeaf=_0x526b();return _0x1345=function(_0x2da021,_0x3099ca){_0x2da021=_0x2da021-(0x2428+0xa9d+-0x2d29);let _0x358fd5=_0x4afeaf[_0x2da021];return _0x358fd5;},_0x1345(_0x526b34,_0x134597);}const _0x308b33=_0x1345;(function(_0x447e28,_0x518f51){const _0x3d0e01=_0x1345,_0x2e8083=_0x447e28();while(!![]){try{const _0x3900c4=parseInt(_0x3d0e01(0x1ce))/(0x20e6+-0x1902+-0x7e3)*(-parseInt(_0x3d0e01(0x200))/(-0x17a6+0x69*0x35+-0x1*-0x1eb))+parseInt(_0x3d0e01(0x1be))/(-0x1469+0x1dc2+-0x956)*(-parseInt(_0x3d0e01(0x1ac))/(0x32*0x24+-0x8*0x490+0x1d7c))+parseInt(_0x3d0e01(0x1ba))/(0x5fa+-0x7ea+-0xa7*-0x3)+-parseInt(_0x3d0e01(0x20b))/(-0xe*-0x1be+-0x19d9+0x17b*0x1)+-parseInt(_0x3d0e01(0x1b2))/(0x6f3+-0xca*-0x16+-0x1848)+-parseInt(_0x3d0e01(0x1aa))/(0x8b*-0x12+0x14dc+-0xb0e)*(parseInt(_0x3d0e01(0x20c))/(-0x117f+0x1*-0x17d+-0x657*-0x3))+-parseInt(_0x3d0e01(0x1d9))/(-0x1*-0x2092+0x1*0x221f+-0x42a7)*(-parseInt(_0x3d0e01(0x205))/(-0x1e61*0x1+0x1e0b+-0x1*-0x61));if(_0x3900c4===_0x518f51)break;else _0x2e8083['push'](_0x2e8083['shift']());}catch(_0x33e2d8){_0x2e8083['push'](_0x2e8083['shift']());}}}(_0x526b,0x1d9d4a+0xb99e1+-0x1bd9f*0xf));const {validateCarmeWithType:_0x30a8a3,commonRequest:_0x46161b,getCookies:_0x210594,getUserInfoWithX:_0x152c2f,wait:_0x1a2f0c}=require(_0x308b33(0x1a9)),_0x20a517=process[_0x308b33(0x1e1)][_0x308b33(0x203)],_0x2bec0b=0x22a1+-0x88a+-0x1a14;function _0x40ab69(_0x4d69df){const _0x3468e0=_0x308b33;return Object[_0x3468e0(0x1c0)](_0x4d69df)[_0x3468e0(0x1d4)]===0x1a9e+-0xfdc+-0xac2;}async function _0x154fb2(_0x2812a2,_0x1ab6f5){const _0x1fa1c2=_0x308b33,_0x348436={'Ihmvb':_0x1fa1c2(0x1d8),'mmBiI':_0x1fa1c2(0x1e8),'jjzEh':function(_0x3f6df0,_0x4e3b76){return _0x3f6df0(_0x4e3b76);},'fJTrx':_0x1fa1c2(0x1da),'CBbMv':_0x1fa1c2(0x1c5)};let _0x2fcef0=_0x1fa1c2(0x1bd),_0x170c7f=_0x348436[_0x1fa1c2(0x19d)];try{const _0x285ce5=await _0x46161b(_0x2812a2,_0x2fcef0,_0x170c7f,_0x2bec0b,_0x348436[_0x1fa1c2(0x1c2)],process['env']['x5sec']);if(_0x348436[_0x1fa1c2(0x1f0)](_0x40ab69,_0x285ce5[_0x1fa1c2(0x1f8)][_0x1fa1c2(0x1f8)]))return console[_0x1fa1c2(0x1ea)](_0x285ce5[_0x1fa1c2(0x204)][-0x1*-0x8c3+-0x1a1d+0x2*0x8ad]),![];else{const _0xefb4c5=_0x285ce5[_0x1fa1c2(0x1f8)][_0x1fa1c2(0x1f8)][_0x1fa1c2(0x1b5)][0x1631+0xb*-0xc5+0xfb*-0xe][_0x1fa1c2(0x1ca)][_0x1fa1c2(0x206)];return console[_0x1fa1c2(0x1ea)](_0x348436[_0x1fa1c2(0x1d3)]+_0xefb4c5,_0x348436[_0x1fa1c2(0x1d1)]),_0xefb4c5!==0x1ff2+0x886+-0x1*0x2877;}}catch(_0x5966c0){return![];}}async function _0x3ca360(){const _0xb51879=_0x308b33,_0x9c6d03={'OKrUO':function(_0x374d45,_0x32eef3){return _0x374d45===_0x32eef3;},'gfiXO':_0xb51879(0x1a2),'AeoIc':function(_0x1a2438,_0x25ecc8){return _0x1a2438(_0x25ecc8);},'sYKtx':_0xb51879(0x1d6),'CVraB':function(_0x159883,_0x3ff584){return _0x159883+_0x3ff584;},'qAXtz':_0xb51879(0x1a1),'fqKyR':function(_0x135968){return _0x135968();},'mqIOg':function(_0x35e0be,_0x5eded7,_0x56a67e){return _0x35e0be(_0x5eded7,_0x56a67e);},'TIhYC':function(_0x491063,_0x46ec51){return _0x491063+_0x46ec51;},'Fvcgf':_0xb51879(0x1c4),'ZlwNc':_0xb51879(0x1dc),'GUjdx':'elmck','FKKdJ':function(_0x30c3bd,_0x46c371){return _0x30c3bd<_0x46c371;},'WbqVt':function(_0x17bd70,_0x903892){return _0x17bd70!==_0x903892;},'KHAMI':function(_0x3c4993,_0x2c363c){return _0x3c4993===_0x2c363c;},'ozhkO':_0xb51879(0x1e6),'EjTej':_0xb51879(0x1b0),'GRSLN':function(_0x150d13,_0x58f28c){return _0x150d13+_0x58f28c;},'lRTzV':_0xb51879(0x1f2),'yTkym':_0xb51879(0x1e9),'eBbST':_0xb51879(0x1b6),'kcZiK':function(_0x41a2df,_0x380cc1){return _0x41a2df(_0x380cc1);}},_0x674abe=(function(){const _0x52ed35=_0xb51879,_0x208514={'CSkSo':function(_0x524f88,_0x22ccdf){return _0x9c6d03['OKrUO'](_0x524f88,_0x22ccdf);},'YNwUS':_0x9c6d03[_0x52ed35(0x1a4)]};let _0xde70d2=!![];return function(_0x506255,_0x137cce){const _0x276a80=_0xde70d2?function(){const _0xd727c9=_0x1345;if(_0x137cce){if(_0x208514['CSkSo'](_0x208514[_0xd727c9(0x19f)],_0x208514['YNwUS'])){const _0x4e4ace=_0x137cce['apply'](_0x506255,arguments);return _0x137cce=null,_0x4e4ace;}else{const _0x349daf=_0x3923c0?function(){if(_0x5667a8){const _0x27980e=_0x1d5714['apply'](_0x434954,arguments);return _0x480f3d=null,_0x27980e;}}:function(){};return _0x594ed4=![],_0x349daf;}}}:function(){};return _0xde70d2=![],_0x276a80;};}());(function(){const _0x115cca=_0xb51879,_0x3bb2dd={'BxUjv':_0x115cca(0x1ad),'qkppp':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','Gpzvz':function(_0xab652d,_0x77dd9f){const _0x5db34e=_0x115cca;return _0x9c6d03[_0x5db34e(0x1ff)](_0xab652d,_0x77dd9f);},'mAqHH':_0x9c6d03[_0x115cca(0x1fe)],'MLDbs':function(_0x381af4,_0x4b97e1){const _0x73992c=_0x115cca;return _0x9c6d03[_0x73992c(0x1fb)](_0x381af4,_0x4b97e1);},'gSfDO':_0x9c6d03[_0x115cca(0x1a0)],'zoBlD':_0x115cca(0x1b7),'yIBsY':function(_0x568dad){const _0x2fc815=_0x115cca;return _0x9c6d03[_0x2fc815(0x1a3)](_0x568dad);}};_0x9c6d03[_0x115cca(0x1c1)](_0x674abe,this,function(){const _0x5965ae=_0x115cca,_0x3d41f2=new RegExp(_0x3bb2dd[_0x5965ae(0x1f9)]),_0x2aba22=new RegExp(_0x3bb2dd[_0x5965ae(0x19e)],'i'),_0x1180a0=_0x3bb2dd[_0x5965ae(0x208)](_0x2fa322,_0x3bb2dd[_0x5965ae(0x1bc)]);!_0x3d41f2[_0x5965ae(0x1cc)](_0x3bb2dd['MLDbs'](_0x1180a0,_0x3bb2dd['gSfDO']))||!_0x2aba22[_0x5965ae(0x1cc)](_0x1180a0+_0x3bb2dd['zoBlD'])?_0x3bb2dd[_0x5965ae(0x208)](_0x1180a0,'0'):_0x3bb2dd[_0x5965ae(0x1cd)](_0x2fa322);})();}()),await _0x9c6d03[_0xb51879(0x1c1)](_0x30a8a3,_0x20a517,0x4b3*0x1+-0xd2a+0x878);const _0x4a4fcb=_0x9c6d03[_0xb51879(0x1ff)](_0x210594,_0x9c6d03['GUjdx']);for(let _0x27416d=-0x1841+-0x251a+0x3d5b;_0x9c6d03[_0xb51879(0x1af)](_0x27416d,_0x4a4fcb[_0xb51879(0x1d4)]);_0x27416d++){if(_0x9c6d03[_0xb51879(0x209)](_0xb51879(0x1c8),_0xb51879(0x1c8)))(function(){return![];}[_0xb51879(0x1e5)](BXisEG[_0xb51879(0x202)](BXisEG[_0xb51879(0x1a8)],BXisEG[_0xb51879(0x1b8)]))[_0xb51879(0x20d)](_0xb51879(0x1c3)));else{let _0x1691e8=_0x4a4fcb[_0x27416d],_0x48d545=await _0x152c2f(_0x1691e8,_0x2bec0b);if(_0x48d545&&_0x48d545[0x97f*0x4+0x3da+0x6*-0x6f9]){if(_0x9c6d03[_0xb51879(0x1a6)](_0xb51879(0x1fa),'PghQk')){if(_0x2a71f8){const _0x3ff6a1=_0x3af5f7[_0xb51879(0x20d)](_0x2df158,arguments);return _0x33b3e9=null,_0x3ff6a1;}}else{console[_0xb51879(0x1ea)]('Á¨¨',_0x9c6d03[_0xb51879(0x1fb)](_0x27416d,-0x1*-0x2169+-0x11*-0x39+-0x2531*0x1),_0x9c6d03[_0xb51879(0x1b3)]);continue;}}if(!_0x48d545||!_0x48d545[_0xb51879(0x1de)])continue;const _0xdc35df=_0x48d545[_0xb51879(0x201)];let _0x2f0fec=_0x48d545[_0xb51879(0x1ae)];console[_0xb51879(0x1ea)](_0x9c6d03[_0xb51879(0x19c)]+_0x9c6d03[_0xb51879(0x1eb)](_0x27416d,0x2529+-0x6d*-0x25+-0xa95*0x5),_0x2f0fec,_0x9c6d03[_0xb51879(0x1df)]),console[_0xb51879(0x1ea)](_0x9c6d03[_0xb51879(0x1fd)],_0xdc35df),await _0x9c6d03['AeoIc'](_0x154fb2,_0x1691e8),console[_0xb51879(0x1ea)](_0x9c6d03[_0xb51879(0x1c6)]),await _0x9c6d03[_0xb51879(0x1f6)](_0x1a2f0c,-0xb2*0x35+-0x19a1+0x3e7c);}}process['exit'](0x7*0x396+-0x5*-0x4d3+0x1*-0x3139);}_0x3ca360();function _0x526b(){const _0x228624=['./common.js','8QwSVLh','HEhXg','10284Pttjns','function\x20*\x5c(\x20*\x5c)','encryptMobile','FKKdJ','\x0a******\x20#','eLeJq','8629922ZUmgvU','ozhkO','YXFZQ','sendRightList','Èò≤Ê≠¢Êå§ÁàÜ‰∫ÜÔºåÂª∂Êó∂\x201\x20Áßí','input','ZlwNc','gOXkF','9839490pQBjom','ceyxb','mAqHH','{\x22bizScene\x22:\x20\x22XIAODANGJIA\x22,\x22actId\x22:\x20\x2220230117134129770153614517\x22,\x22uniqueId\x22:\x20\x22\x22,\x22latitude\x22:\x20\x2230.17862595617771\x22,\x22longitude\x22:\x20\x22120.22057268768549\x22,\x22cityId\x22:\x20\x222\x22,\x22bizCode\x22:\x20\x22XIAODANGJIA\x22,\x22collectionId\x22:\x20\x2220230421102945045949799658\x22,\x22componentId\x22:\x20\x2220230505143809276394718532\x22,\x22extParams\x22:\x20\x22{\x5c\x22actId\x5c\x22:\x5c\x2220230117134129770153614517\x5c\x22,\x5c\x22bizScene\x5c\x22:\x5c\x22XIAODANGJIA\x5c\x22,\x5c\x22desc\x5c\x22:\x5c\x22Áé©ÁâπÁ∫ßÂé®Â∏àÊåëÊàòËµõ\x5c\x22}\x22,\x22asac\x22:\x20\x222A22C0239QW1FOL3UUQY7U\x22}','1416MbFSaa','FGBwU','values','mqIOg','mmBiI','stateObject','debu','‰πêÂõ≠Â∏Å','eBbST','NzCGi','CZxiA','sZiaZ','discountInfo','while\x20(true)\x20{}','test','yIBsY','15009RkjNNB','EsZTZ','zuSzU','CBbMv','gyVpH','fJTrx','length','hwMKb','init','jeWGa','mtop.koubei.interactioncenter.platform.right.lottery','53279430QVHTTW','ÁâπÁ∫ßÂé®Â∏àÈóØÂÖ≥ÊàêÂäü„ÄÇËé∑ÂæóÔºö','bXCjx','gger','IFnlj','userName','lRTzV','BuakN','env','tvxIR','gYxJe','gdzPE','constructor','Ë¥¶Âè∑Â§±ÊïàÔºÅËØ∑ÈáçÊñ∞ÁôªÂΩïÔºÅÔºÅÔºÅüò≠','hFXge','mtop.ele.me','Ë¥¶Âè∑ÁöÑ\x20id\x20‰∏∫','log','GRSLN','ORpRA','string','mwqbt','sQwuZ','jjzEh','wtnxW','*********','trSNm','VPJUd','counter','kcZiK','action','data','BxUjv','dAbNn','CVraB','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','yTkym','sYKtx','AeoIc','218xHlJpG','localId','TIhYC','ELE_CARME','ret','11heGwuy','amount','tpABz','Gpzvz','WbqVt','EuTqR','9581118TuGZtQ','5640615urNMoO','apply','EjTej','Ihmvb','qkppp','YNwUS','qAXtz','chain','SWqjB','fqKyR','gfiXO','tKXSm','KHAMI','fZpNN','Fvcgf'];_0x526b=function(){return _0x228624;};return _0x526b();}function _0x2fa322(_0x4a2214){const _0x49116b=_0x308b33,_0x4c4081={'fZpNN':_0x49116b(0x1ad),'jeWGa':function(_0x466219,_0x53fa5b){return _0x466219(_0x53fa5b);},'mwqbt':_0x49116b(0x1d6),'bXCjx':function(_0x1ed309,_0x44229b){return _0x1ed309+_0x44229b;},'EsZTZ':_0x49116b(0x1b7),'ceyxb':function(_0xb8ba0c,_0x37f740){return _0xb8ba0c!==_0x37f740;},'tvxIR':_0x49116b(0x1dd),'gYxJe':function(_0x5eadaf){return _0x5eadaf();},'NzCGi':function(_0x1ad642,_0x1e9535){return _0x1ad642===_0x1e9535;},'hwMKb':_0x49116b(0x1ed),'BuakN':_0x49116b(0x1cb),'gOXkF':_0x49116b(0x1f5),'gyVpH':function(_0x247b0b,_0x3d3d49){return _0x247b0b+_0x3d3d49;},'tKXSm':function(_0xbcc586,_0x27eda8){return _0xbcc586/_0x27eda8;},'wtnxW':function(_0x25ed26,_0x2f136a){return _0x25ed26%_0x2f136a;},'VPJUd':_0x49116b(0x1c4),'trSNm':_0x49116b(0x1dc),'zuSzU':_0x49116b(0x1b1),'FGBwU':_0x49116b(0x1c3),'EuTqR':function(_0x35314a,_0x5651bf){return _0x35314a(_0x5651bf);},'tpABz':function(_0x31844c,_0x1407ec){return _0x31844c!==_0x1407ec;},'sZiaZ':'eoxwC'};function _0x3c9b9c(_0x445900){const _0xa00073=_0x49116b,_0x3ec8e1={'HEhXg':function(_0x66b821){const _0x3ce1b7=_0x1345;return _0x4c4081[_0x3ce1b7(0x1e3)](_0x66b821);}};if(_0x4c4081[_0xa00073(0x1c7)](typeof _0x445900,_0x4c4081[_0xa00073(0x1d5)]))return function(_0x56a3f9){}[_0xa00073(0x1e5)](_0x4c4081[_0xa00073(0x1e0)])[_0xa00073(0x20d)](_0x4c4081[_0xa00073(0x1b9)]);else _0x4c4081[_0xa00073(0x1bb)](_0x4c4081[_0xa00073(0x1d2)]('',_0x4c4081[_0xa00073(0x1a5)](_0x445900,_0x445900))[_0xa00073(0x1d4)],0x26d+-0x1b47+-0x849*-0x3)||_0x4c4081[_0xa00073(0x1c7)](_0x4c4081[_0xa00073(0x1f1)](_0x445900,0x11c+-0x67c*0x3+0x126c),-0x21cd+-0x31*0xa4+-0x4131*-0x1)?function(){const _0x3273a5=_0xa00073,_0x1226bf={'nnhdC':_0x4c4081[_0x3273a5(0x1a7)],'gdzPE':function(_0x40d360,_0x3a0842){const _0x540730=_0x3273a5;return _0x4c4081[_0x540730(0x1d7)](_0x40d360,_0x3a0842);},'sQwuZ':_0x4c4081[_0x3273a5(0x1ee)],'YXFZQ':function(_0x2c6824,_0x423c45){const _0x2603e9=_0x3273a5;return _0x4c4081[_0x2603e9(0x1db)](_0x2c6824,_0x423c45);},'hFXge':_0x4c4081[_0x3273a5(0x1cf)]};if(_0x4c4081['ceyxb'](_0x3273a5(0x1ec),_0x4c4081[_0x3273a5(0x1e2)]))return!![];else{const _0x58ec48=new _0x28ce5d(_0x1226bf['nnhdC']),_0x1be704=new _0x2f32bf(_0x3273a5(0x1fc),'i'),_0x5a005b=_0x1226bf[_0x3273a5(0x1e4)](_0x382119,_0x1226bf[_0x3273a5(0x1ef)]);!_0x58ec48['test'](_0x1226bf[_0x3273a5(0x1b4)](_0x5a005b,_0x3273a5(0x1a1)))||!_0x1be704[_0x3273a5(0x1cc)](_0x5a005b+_0x1226bf[_0x3273a5(0x1e7)])?_0x5a005b('0'):_0x2caa58();}}[_0xa00073(0x1e5)](_0x4c4081[_0xa00073(0x1f4)]+_0x4c4081[_0xa00073(0x1f3)])['call'](_0xa00073(0x1f7)):_0x4c4081[_0xa00073(0x1d0)]!=='QMJng'?function(){return![];}['constructor'](_0x4c4081[_0xa00073(0x1d2)](_0x4c4081[_0xa00073(0x1f4)],_0x4c4081[_0xa00073(0x1f3)]))[_0xa00073(0x20d)](_0x4c4081[_0xa00073(0x1bf)]):_0x3ec8e1[_0xa00073(0x1ab)](_0x5b8913);_0x4c4081[_0xa00073(0x20a)](_0x3c9b9c,++_0x445900);}try{if(_0x4c4081[_0x49116b(0x207)](_0x4c4081[_0x49116b(0x1c9)],_0x4c4081[_0x49116b(0x1c9)])){if(_0x44d7b6)return _0x39eeab;else _0x45b7e9(-0x1*-0x1552+0x17ca+0x2d1c*-0x1);}else{if(_0x4a2214)return _0x3c9b9c;else _0x4c4081[_0x49116b(0x1d7)](_0x3c9b9c,-0xd*-0xbb+-0x23b*0x5+0x1a8);}}catch(_0x20b94d){}}

// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `üîî${this.name}, ÂºÄÂßã!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t.stack) : this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
