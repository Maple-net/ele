/**
 * 变量：elmqqck: 必填，账号cookie，
 * cron 1 1 1 1 1
 * 2023.9.8 更新：首次发布；
 */

const $ = new Env('饿了么查询抢券结果');

const _0x54b2d0=_0x566c;(function(_0x2e5515,_0x312e6b){const _0x615db=_0x566c,_0x217e96=_0x2e5515();while(!![]){try{const _0x455217=-parseInt(_0x615db(0x298))/(0x2aa*0xc+-0x167a+-0x97d)*(-parseInt(_0x615db(0x1f3))/(-0x1b25+0x1e1c*0x1+-0x2f5))+-parseInt(_0x615db(0x1ed))/(0x1552*0x1+0x1f0f+0x1*-0x345e)*(parseInt(_0x615db(0x1cc))/(-0x1995+0xb*-0x305+-0x4*-0xeb4))+-parseInt(_0x615db(0x226))/(0x4df*-0x1+0x1*-0xc77+0x115b)*(-parseInt(_0x615db(0x27e))/(-0x10a*0x11+0xb48+0x668))+parseInt(_0x615db(0x1c9))/(-0x1655*0x1+0xd90+0x8cc)+-parseInt(_0x615db(0x282))/(-0x598+0x24a5+0x1*-0x1f05)*(parseInt(_0x615db(0x20c))/(-0xd*0x2d3+-0x244d+0x1*0x490d))+parseInt(_0x615db(0x228))/(0xd*-0x1c6+0x1152+0x5c6)*(-parseInt(_0x615db(0x20e))/(0x536+0x11de+-0x1709))+-parseInt(_0x615db(0x24f))/(0x987*0x1+-0x1*-0x206d+-0x29e8)*(parseInt(_0x615db(0x274))/(-0x198b+-0xe*0x162+0x2cf4));if(_0x455217===_0x312e6b)break;else _0x217e96['push'](_0x217e96['shift']());}catch(_0x17533e){_0x217e96['push'](_0x217e96['shift']());}}}(_0x3d98,-0x5e41*-0x9+-0xc18f+-0x3*-0x1c32));function _0x566c(_0x566c2e,_0x41e001){const _0x5da86b=_0x3d98();return _0x566c=function(_0x43f2b7,_0x42f915){_0x43f2b7=_0x43f2b7-(0x95*-0x2d+-0x2554+0x413d);let _0x33cea0=_0x5da86b[_0x43f2b7];return _0x33cea0;},_0x566c(_0x566c2e,_0x41e001);}const {checkCk,validateCarmeWithType,getUserInfo,tryCatchPromise,couponNotify,getCookies,wait,getCookieMap,randomString}=require(_0x54b2d0(0x27b)),request=require(_0x54b2d0(0x212)),moment=require('moment'),kami=process['env']['ELE_CARME'],GAME_TYEP=-0x7b*0x31+0x70b+0x1092,CHECK_BASE_URL=process[_0x54b2d0(0x241)]['HOST'];function getJson(_0x9f7f45,_0xa13e74,_0x31ecd6,_0x284545,_0x53bd39,_0x43da9c,_0x14e180,_0x3f5a79){const _0x4eb7c3=_0x54b2d0,_0x2ce76a={'lUIgY':_0x4eb7c3(0x252),'xMAUN':function(_0x227f18,_0x4dd555){return _0x227f18===_0x4dd555;},'JJvtQ':'KgTdw','lVHdV':_0x4eb7c3(0x22d),'QQKBe':function(_0x9d5dec,_0x39933f){return _0x9d5dec!==_0x39933f;},'yNpIc':'rwhro','Ippbr':_0x4eb7c3(0x1f5),'HKwIY':function(_0x58eda5,_0x49fdda){return _0x58eda5(_0x49fdda);},'hxcbM':function(_0x2bba66,_0x3cbbf2,_0x5f37da){return _0x2bba66(_0x3cbbf2,_0x5f37da);},'kzMEm':_0x4eb7c3(0x209),'IaFLf':_0x4eb7c3(0x291),'CHNKo':function(_0x585ee2,_0x19f830){return _0x585ee2+_0x19f830;},'UogNl':function(_0x53304e,_0x239a46){return _0x53304e(_0x239a46);}};let _0x539be9={'carmi':kami,'userId':_0x3f5a79,'gameType':GAME_TYEP,'needSignData':{'data':_0x9f7f45,'api':_0xa13e74,'pageId':decodeURIComponent(_0x31ecd6),'uid':_0x53bd39,'deviceId':_0x43da9c,'utdid':_0x14e180}};_0x284545&&(_0x539be9['needSignData'][_0x4eb7c3(0x264)]=_0x284545);_0x539be9['needSignData']=JSON[_0x4eb7c3(0x250)](_0x539be9[_0x4eb7c3(0x232)]);const _0x2d5fe1={'method':_0x2ce76a['kzMEm'],'headers':{'content-type':_0x2ce76a['IaFLf']},'url':_0x2ce76a[_0x4eb7c3(0x1d0)](CHECK_BASE_URL,_0x4eb7c3(0x201)),'body':JSON[_0x4eb7c3(0x250)](_0x539be9)};return _0x2ce76a[_0x4eb7c3(0x1f0)](tryCatchPromise,_0x1ea83c=>{const _0x371309=_0x4eb7c3,_0x3ad4da={'ddZun':_0x2ce76a[_0x371309(0x1e1)],'FYTjx':function(_0x432a19,_0x4797a4){return _0x2ce76a['xMAUN'](_0x432a19,_0x4797a4);},'ANMLt':_0x2ce76a['JJvtQ'],'SpQCF':_0x2ce76a['lVHdV'],'alYUU':function(_0x32dea5,_0x39968b){return _0x2ce76a['QQKBe'](_0x32dea5,_0x39968b);},'ObrWU':_0x2ce76a[_0x371309(0x2ad)],'ShXiV':_0x2ce76a['Ippbr'],'RZjst':function(_0x55c187,_0x160adb){return _0x2ce76a['HKwIY'](_0x55c187,_0x160adb);},'DfDmK':function(_0x121740,_0x4ca821){const _0x10202a=_0x371309;return _0x2ce76a[_0x10202a(0x23b)](_0x121740,_0x4ca821);}};_0x2ce76a[_0x371309(0x223)](request,_0x2d5fe1,async(_0x463dad,_0x5458d3,_0x343ebc)=>{const _0xbf8308=_0x371309;if(!_0x463dad&&_0x3ad4da['FYTjx'](_0x5458d3['statusCode'],-0x5b1+-0x3f1+0xa6a)){if(_0x3ad4da[_0xbf8308(0x256)](_0x3ad4da[_0xbf8308(0x257)],_0x3ad4da['SpQCF'])){if(_0x198284){const _0x11fe06=_0x39fedb['apply'](_0x4f7085,arguments);return _0x3d4ae2=null,_0x11fe06;}}else try{if(_0x3ad4da[_0xbf8308(0x22a)](_0x3ad4da[_0xbf8308(0x220)],_0x3ad4da[_0xbf8308(0x220)]))_0x3ad412[_0xbf8308(0x253)](_0x3ad4da[_0xbf8308(0x1dd)]);else{const _0x2ba693=JSON[_0xbf8308(0x29a)](_0x343ebc);_0x1ea83c(_0x2ba693);}}catch(_0x574f87){if(_0x3ad4da[_0xbf8308(0x256)](_0x3ad4da['ShXiV'],_0x3ad4da[_0xbf8308(0x22c)]))console[_0xbf8308(0x253)](_0x574f87),_0x3ad4da[_0xbf8308(0x238)](_0x1ea83c,null);else return!![];}}else _0x3ad4da[_0xbf8308(0x20d)](_0x1ea83c,null);});});}async function queryCoupon(_0x278b19,_0x7c4ae5){const _0xaf3e9=_0x54b2d0,_0x2abb0e={'jParO':function(_0x136073,_0x21f2b7){return _0x136073===_0x21f2b7;},'sYALi':'无门槛','JUorg':_0xaf3e9(0x28e),'DDeOk':function(_0x292494,_0x2ca344){return _0x292494>=_0x2ca344;},'uDiQA':function(_0x347eb1,_0x564bfa){return _0x347eb1+_0x564bfa;},'Bxhny':function(_0xe6c7e5,_0x280a1c){return _0xe6c7e5/_0x280a1c;},'IsyrE':function(_0x3d9a3b,_0x39e6bd){return _0x3d9a3b(_0x39e6bd);},'ihFEF':'day','dNoVe':'wUcCN','LAFzM':_0xaf3e9(0x233),'bkBBR':'\x0a抢券成功','jGdBT':function(_0x36601c,_0x3eedca){return _0x36601c===_0x3eedca;},'jJGcd':'QxrAz','VPgwh':'查询抢券结果异常，请到\x20app\x20中查看','btvfq':_0xaf3e9(0x1fe),'LsrcC':function(_0x4c7a18){return _0x4c7a18();},'TPyKl':function(_0x376355,_0x3efe4b,_0x98760d){return _0x376355(_0x3efe4b,_0x98760d);},'rELXg':function(_0x32751b,_0x2ad19c){return _0x32751b(_0x2ad19c);},'lbjTt':_0xaf3e9(0x2a2),'TtxFL':_0xaf3e9(0x259),'wBYGe':_0xaf3e9(0x1ee),'GTzZI':'umt','sOHbt':function(_0x37243c,_0x324e30){return _0x37243c+_0x324e30;},'bLkja':function(_0x552d46,_0x44af13){return _0x552d46+_0x44af13;},'RTIhJ':_0xaf3e9(0x1e9),'cjClQ':_0xaf3e9(0x254),'MMdXn':_0xaf3e9(0x29b),'VVTiB':_0xaf3e9(0x2a9),'ubimw':_0xaf3e9(0x26c),'lkqms':_0xaf3e9(0x2a5),'vRSlH':_0xaf3e9(0x1f4),'MQyeS':function(_0x4a3f46,_0x4f8231){return _0x4a3f46(_0x4f8231);},'jIMFO':_0xaf3e9(0x26b),'dpjpX':function(_0x176ba8,_0x12d481){return _0x176ba8(_0x12d481);},'jfcNn':function(_0x528270,_0x4ad0bf){return _0x528270(_0x4ad0bf);},'JqPUX':_0xaf3e9(0x1de),'HTBoG':_0xaf3e9(0x279),'WuPGY':_0xaf3e9(0x1c5),'hWuVF':_0xaf3e9(0x224),'UvSVi':_0xaf3e9(0x251),'WbjPm':_0xaf3e9(0x1d4),'wmwYl':_0xaf3e9(0x1c1),'NuNPP':_0xaf3e9(0x265),'xSVzD':_0xaf3e9(0x1e0),'BnuYC':'10.14.3','WYMoM':_0xaf3e9(0x205),'GwJJW':_0xaf3e9(0x2a3),'zYkVU':function(_0x11c87a,_0x51cda1){return _0x11c87a+_0x51cda1;},'alccg':function(_0x577830,_0x394f73){return _0x577830+_0x394f73;},'GqOeq':function(_0x49bb71,_0x33c47b){return _0x49bb71+_0x33c47b;},'vbyAQ':_0xaf3e9(0x25b),'zTFbQ':_0xaf3e9(0x24d),'CsaDc':function(_0x14c884,_0x1806df){return _0x14c884(_0x1806df);}};let _0x3c39e4=_0x2abb0e[_0xaf3e9(0x1dc)](getCookieMap,_0x278b19),_0x345fd5=_0x3c39e4[_0xaf3e9(0x263)](_0x2abb0e[_0xaf3e9(0x200)])||randomString(-0x48a+0x9bf*-0x3+0xb51*0x3),_0x256b8c=_0x3c39e4[_0xaf3e9(0x263)](_0x2abb0e[_0xaf3e9(0x242)])||randomString(-0x19*0x99+-0xfb5*-0x1+-0xac),_0x806353=_0x3c39e4[_0xaf3e9(0x263)](_0x2abb0e['wBYGe']),_0x4b90cd=_0x3c39e4[_0xaf3e9(0x263)](_0x2abb0e['GTzZI']),_0x40bd3e=_0x2abb0e[_0xaf3e9(0x21d)](_0x2abb0e[_0xaf3e9(0x26e)](_0x2abb0e[_0xaf3e9(0x284)],_0x806353),_0x2abb0e[_0xaf3e9(0x271)]),_0x4d693e=_0x2abb0e[_0xaf3e9(0x1ec)],_0x1f69b7=_0x2abb0e['VVTiB'],_0x286145=_0x3c39e4[_0xaf3e9(0x263)](_0x2abb0e[_0xaf3e9(0x1bf)]),_0x5cd4b7=_0x3c39e4[_0xaf3e9(0x263)](_0x2abb0e[_0xaf3e9(0x23a)]),_0x5b68bc=await getJson(_0x40bd3e,_0x4d693e,_0x1f69b7,_0x286145,_0x5cd4b7,_0x345fd5,_0x256b8c,_0x806353);if(!_0x5b68bc){console[_0xaf3e9(0x253)](_0xaf3e9(0x252));return;}if(_0x5b68bc[_0xaf3e9(0x1e7)]!==-0x3c0b+0x7d1f+-0x14*-0xa7){console['log'](_0x5b68bc[_0xaf3e9(0x29c)]),_0x5b68bc[_0xaf3e9(0x29c)][_0xaf3e9(0x1ca)](_0x2abb0e[_0xaf3e9(0x225)])!==-(-0x1227+0x88f+-0x3*-0x333)&&process[_0xaf3e9(0x20f)](-0x26a*0x8+-0x367+0x16b7*0x1);return;}else _0x5b68bc=_0x5b68bc[_0xaf3e9(0x204)];_0x5b68bc=JSON['parse'](_0x5b68bc['msg']);let _0x56f641=_0x2abb0e[_0xaf3e9(0x244)](encodeURIComponent,_0x5b68bc['x-sgext']),_0x30bd3a=_0x2abb0e['MQyeS'](encodeURIComponent,_0x5b68bc[_0x2abb0e[_0xaf3e9(0x1da)]]);_0x4b90cd=_0x2abb0e[_0xaf3e9(0x2a8)](encodeURIComponent,_0x5b68bc[_0xaf3e9(0x2aa)]);let _0x788757=_0x2abb0e[_0xaf3e9(0x285)](encodeURIComponent,_0x5b68bc[_0x2abb0e[_0xaf3e9(0x28b)]]),_0x2539c4=_0x5b68bc[_0x2abb0e[_0xaf3e9(0x1d1)]],_0xf1c524=encodeURIComponent(_0x5b68bc[_0xaf3e9(0x206)]),_0xdb30b4={'x-sgext':_0x56f641,'x-sign':_0x30bd3a,'x-devid':_0x345fd5,'x-pv':_0x2abb0e['WuPGY'],'x-features':_0x2abb0e[_0xaf3e9(0x269)],'x-mini-wua':_0x788757,'content-type':_0x2abb0e[_0xaf3e9(0x287)],'x-t':_0x2539c4,'x-bx-version':_0x2abb0e['WbjPm'],'f-refer':_0x2abb0e[_0xaf3e9(0x207)],'x-extdata':_0x2abb0e[_0xaf3e9(0x275)],'x-ttid':_0x2abb0e[_0xaf3e9(0x1e6)],'x-app-ver':_0x2abb0e[_0xaf3e9(0x1e2)],'x-umt':_0x4b90cd,'x-utdid':_0x2abb0e['dpjpX'](encodeURIComponent,_0x256b8c),'x-appkey':_0x2abb0e[_0xaf3e9(0x1c4)],'x-page-url':_0x1f69b7,'Host':_0xaf3e9(0x1f8),'user-agent':_0x2abb0e[_0xaf3e9(0x218)],'x-sid':_0x286145,'x-uid':_0x5cd4b7,'Cookie':_0x278b19},_0x278bb0=_0x2abb0e['zYkVU'](_0x2abb0e['alccg'](_0x2abb0e[_0xaf3e9(0x2ab)](_0x2abb0e[_0xaf3e9(0x1d9)],_0x2abb0e[_0xaf3e9(0x1dc)](encodeURIComponent,_0x40bd3e)),_0x2abb0e['zTFbQ']),_0xf1c524);const _0x31cdc4={'method':_0xaf3e9(0x209),'url':_0x278bb0,'headers':_0xdb30b4,'body':_0x40bd3e};return _0x2abb0e['CsaDc'](tryCatchPromise,_0x139950=>{const _0x48d197=_0xaf3e9,_0x1756a9={'ZDFdt':function(_0x4b1ab2,_0x3cb3de){return _0x2abb0e['jParO'](_0x4b1ab2,_0x3cb3de);},'Khcwm':function(_0x2fb072,_0x42010d){return _0x2fb072===_0x42010d;},'VAWjd':_0x2abb0e['sYALi'],'hLmec':function(_0x2994cf,_0x1ee597){const _0x25fd7a=_0x566c;return _0x2abb0e[_0x25fd7a(0x22f)](_0x2994cf,_0x1ee597);},'MfCCO':_0x2abb0e[_0x48d197(0x1c7)],'hQYmk':function(_0x57aa6c,_0x4d2b1a){const _0x50b4ed=_0x48d197;return _0x2abb0e[_0x50b4ed(0x268)](_0x57aa6c,_0x4d2b1a);},'JoVpp':function(_0x249381,_0x363b4c){const _0x2a577d=_0x48d197;return _0x2abb0e[_0x2a577d(0x261)](_0x249381,_0x363b4c);},'aoqRP':function(_0xebd681,_0x3e3553){const _0x344a06=_0x48d197;return _0x2abb0e[_0x344a06(0x1cf)](_0xebd681,_0x3e3553);},'YSHJH':function(_0x7e60f8,_0x3db84c){const _0x53a142=_0x48d197;return _0x2abb0e[_0x53a142(0x244)](_0x7e60f8,_0x3db84c);},'nikWf':_0x48d197(0x1df),'QtFtg':function(_0x217b31,_0x469c31){return _0x217b31===_0x469c31;},'iADVN':function(_0x55ae80,_0x4b5306){return _0x55ae80(_0x4b5306);},'aPZXD':'SJHlq','zDYDM':_0x2abb0e[_0x48d197(0x1d8)],'hHhiY':function(_0x1f2a1d,_0x492c7e){return _0x1f2a1d<_0x492c7e;},'OupbS':_0x48d197(0x1d6),'DMCaf':_0x2abb0e[_0x48d197(0x26f)],'LzrvH':_0x48d197(0x2a4),'MTsQi':_0x2abb0e[_0x48d197(0x24b)],'YPYJL':function(_0x5dee38,_0x8c40c3,_0x5ccbb6){return _0x5dee38(_0x8c40c3,_0x5ccbb6);},'sbeNF':function(_0x21cf17,_0x3ba93d){const _0x33e107=_0x48d197;return _0x2abb0e[_0x33e107(0x261)](_0x21cf17,_0x3ba93d);},'BXBGG':function(_0x30816e,_0x1a9be3){return _0x30816e+_0x1a9be3;},'VdmvS':_0x2abb0e['bkBBR'],'ACSZi':function(_0x177a86,_0x4616a9){const _0x3f4b79=_0x48d197;return _0x2abb0e[_0x3f4b79(0x283)](_0x177a86,_0x4616a9);},'yqzdK':_0x2abb0e[_0x48d197(0x2a6)],'POBpG':_0x2abb0e[_0x48d197(0x26d)],'FJFVt':function(_0x2dca24,_0x50ade7){const _0x384958=_0x48d197;return _0x2abb0e[_0x384958(0x283)](_0x2dca24,_0x50ade7);},'zgHsL':_0x48d197(0x294),'dPVyX':_0x2abb0e[_0x48d197(0x21c)],'zPEPt':function(_0x203c85){const _0x457d0b=_0x48d197;return _0x2abb0e[_0x457d0b(0x24e)](_0x203c85);}};_0x2abb0e[_0x48d197(0x1bb)](request,_0x31cdc4,async(_0x26167c,_0x37f686,_0x1da82e)=>{const _0x221eb7=_0x48d197,_0x4044f8={'MGIJX':function(_0x28aca2,_0x4ae4b3){const _0xe54a59=_0x566c;return _0x1756a9[_0xe54a59(0x239)](_0x28aca2,_0x4ae4b3);}};if(!_0x26167c&&_0x1756a9[_0x221eb7(0x236)](_0x37f686[_0x221eb7(0x1b8)],0x1552+0x2*0x92c+-0x26e2)){try{if(_0x1756a9['aPZXD']===_0x1756a9[_0x221eb7(0x1f7)]){const _0x3f16f5=JSON['parse'](_0x1da82e);if(_0x3f16f5[_0x221eb7(0x204)][_0x221eb7(0x204)]){let _0x53621c=_0x3f16f5[_0x221eb7(0x204)][_0x221eb7(0x204)][_0x221eb7(0x247)][_0x221eb7(0x1c8)][_0x221eb7(0x281)];if(_0x53621c){let _0x1ef528=_0x1756a9[_0x221eb7(0x239)](moment,new Date()[_0x221eb7(0x26a)]()),_0x5289f7=_0x1ef528[_0x221eb7(0x1c2)](_0x1756a9[_0x221eb7(0x28a)])[_0x221eb7(0x216)](),_0x2521cd=_0x53621c['filter'](_0x5d808d=>{const _0x4f77d7=_0x221eb7;return _0x1756a9[_0x4f77d7(0x27d)](_0x5d808d['fields'][_0x4f77d7(0x1ef)],_0x4f77d7(0x1df))&&_0x1756a9[_0x4f77d7(0x273)](_0x5d808d[_0x4f77d7(0x1c8)][_0x4f77d7(0x229)],_0x1756a9['VAWjd']);}),_0x5f1dc6=_0x2521cd[_0x221eb7(0x24c)](_0x2d93a0=>{const _0x423328=_0x221eb7;if(_0x1756a9['hLmec'](_0x423328(0x28e),_0x1756a9['MfCCO']))return _0x1756a9[_0x423328(0x243)](_0x2d93a0[_0x423328(0x1c8)][_0x423328(0x1c0)],_0x1756a9[_0x423328(0x262)](_0x1756a9['aoqRP'](_0x5289f7,0x1ab0+-0xd95+-0x933),''));else wZGYpG[_0x423328(0x1f1)](_0x262846,0x1c0a+-0x12ab+-0x1*0x95f);});if(_0x1756a9['hHhiY'](_0x5f1dc6['length'],-0x9e4+0x3b3+-0x7a*-0xd))console[_0x221eb7(0x253)](_0x1756a9[_0x221eb7(0x1e8)]);else{if(_0x1756a9[_0x221eb7(0x267)](_0x221eb7(0x270),_0x1756a9['DMCaf']))for(let _0x12aa41=0x2*0xeb1+-0xa7*0x2+0x4ae*-0x6;_0x1756a9[_0x221eb7(0x235)](_0x12aa41,_0x5f1dc6[_0x221eb7(0x248)]);_0x12aa41++){if(_0x221eb7(0x2a4)!==_0x1756a9[_0x221eb7(0x27a)])_0x4b51f5=_0x3517e0['data'];else{let _0x322bd0=_0x5f1dc6[_0x12aa41];console[_0x221eb7(0x253)](_0x1756a9['MTsQi'],_0x322bd0[_0x221eb7(0x1c8)][_0x221eb7(0x215)]),await _0x1756a9[_0x221eb7(0x222)](couponNotify,_0x278b19,_0x1756a9[_0x221eb7(0x1e3)](_0x1756a9[_0x221eb7(0x202)](_0x221eb7(0x1e5),_0x7c4ae5)+_0x1756a9[_0x221eb7(0x299)],_0x322bd0[_0x221eb7(0x1c8)][_0x221eb7(0x215)]));}}else{const _0x2055c7=_0x29af5f[_0x221eb7(0x29a)](_0x39a625);_0x41c538(_0x2055c7);}}}else{if(_0x1756a9[_0x221eb7(0x219)](_0x221eb7(0x240),_0x1756a9[_0x221eb7(0x1f9)]))console['log'](_0x1756a9[_0x221eb7(0x272)]);else{_0x52a2b0['log'](_0x221eb7(0x252));return;}}}else console['log'](_0x1756a9['POBpG']);}else{if(_0x14655c)return _0x10088e;else hAqxMB[_0x221eb7(0x278)](_0x1f39f1,-0x1*-0x1fdf+-0x9*-0xb7+-0x264e);}}catch(_0x58023c){if(_0x1756a9[_0x221eb7(0x1d5)](_0x1756a9[_0x221eb7(0x245)],_0x1756a9[_0x221eb7(0x2ac)]))return _0x1756a9['Khcwm'](_0x1dd132[_0x221eb7(0x1c8)][_0x221eb7(0x1ef)],_0x1756a9[_0x221eb7(0x1d2)])&&_0x1756a9[_0x221eb7(0x267)](_0x1d1d68[_0x221eb7(0x1c8)][_0x221eb7(0x229)],_0x1756a9['VAWjd']);else console['log'](_0x1756a9[_0x221eb7(0x272)]);}_0x139950();}else console[_0x221eb7(0x253)](_0x1756a9[_0x221eb7(0x272)]),_0x1756a9['zPEPt'](_0x139950);});});}async function start(){const _0x39eb40=_0x54b2d0,_0x52d39d={'UHHAT':function(_0x4d89f4,_0x4a2c94){return _0x4d89f4(_0x4a2c94);},'tAikU':_0x39eb40(0x249),'SPgBh':function(_0x1e4a18,_0x49e63c){return _0x1e4a18+_0x49e63c;},'YZRMn':function(_0x52b31e,_0x57cfeb,_0x13536a){return _0x52b31e(_0x57cfeb,_0x13536a);},'ETNrN':function(_0x583eae,_0x57e253){return _0x583eae===_0x57e253;},'JSdCi':function(_0x30a2b7,_0x3cc4f9){return _0x30a2b7===_0x3cc4f9;},'hXzMC':_0x39eb40(0x230),'rrLgf':function(_0x247b9f,_0x4e8405){return _0x247b9f+_0x4e8405;},'RcSeq':_0x39eb40(0x21b),'JHiil':function(_0x52b046,_0x1af777,_0x2671b7){return _0x52b046(_0x1af777,_0x2671b7);},'eVhrP':function(_0x1ed8a4,_0x58bb68){return _0x1ed8a4<_0x58bb68;},'QFIzs':'账号失效！请重新登录！！！😭','IzJVz':_0x39eb40(0x277),'UtknK':_0x39eb40(0x1cb),'wGBqI':_0x39eb40(0x1f6)},_0x1a996c=(function(){let _0x3a3f70=!![];return function(_0x5a716f,_0xd9446f){const _0x542dc7=_0x566c,_0x35e537={'Dhbzc':'function\x20*\x5c(\x20*\x5c)','QrnHz':function(_0x78675,_0x2a4cdd){const _0x79ace6=_0x566c;return _0x52d39d[_0x79ace6(0x286)](_0x78675,_0x2a4cdd);},'TzwoM':_0x52d39d[_0x542dc7(0x231)],'OeNap':function(_0x17af7d,_0x2a667e){const _0x2e47af=_0x542dc7;return _0x52d39d[_0x2e47af(0x23e)](_0x17af7d,_0x2a667e);},'yqxGP':function(_0x4ea761,_0x216992,_0x38fa00){const _0x97d28c=_0x542dc7;return _0x52d39d[_0x97d28c(0x297)](_0x4ea761,_0x216992,_0x38fa00);},'kWGDA':function(_0x563247,_0x29c727){const _0x56ecd1=_0x542dc7;return _0x52d39d[_0x56ecd1(0x22b)](_0x563247,_0x29c727);},'YyksF':'NbYXA','nHXRE':_0x542dc7(0x1e4),'OHFZT':function(_0x4050d8){return _0x4050d8();}};if(_0x52d39d[_0x542dc7(0x227)](_0x542dc7(0x1d7),_0x542dc7(0x1d7))){const _0x251518=_0x3a3f70?function(){const _0x3564b9=_0x542dc7,_0x302c11={'RGOua':_0x35e537[_0x3564b9(0x1ce)],'tCanN':_0x3564b9(0x1d3),'OEVNu':function(_0x254085,_0x43ab29){const _0x295c32=_0x3564b9;return _0x35e537[_0x295c32(0x25f)](_0x254085,_0x43ab29);},'aXHnd':_0x35e537[_0x3564b9(0x1eb)],'fcXNx':function(_0x3b9feb,_0x56f083){const _0x14097d=_0x3564b9;return _0x35e537[_0x14097d(0x29e)](_0x3b9feb,_0x56f083);},'zfjwa':function(_0x485731,_0x2e7e10,_0x43af23){const _0x2c2b81=_0x3564b9;return _0x35e537[_0x2c2b81(0x288)](_0x485731,_0x2e7e10,_0x43af23);}};if(_0x35e537[_0x3564b9(0x295)](_0x35e537[_0x3564b9(0x292)],_0x35e537[_0x3564b9(0x1bd)])){const _0x22ab2a={'hTerd':WxlwLi[_0x3564b9(0x20b)],'ZqoGr':WxlwLi[_0x3564b9(0x276)],'qCiwD':function(_0x566e4b,_0x59d961){const _0x192306=_0x3564b9;return WxlwLi[_0x192306(0x290)](_0x566e4b,_0x59d961);},'QGCLT':WxlwLi[_0x3564b9(0x237)],'yFxSH':function(_0x4e1fa0,_0x23afa3){return WxlwLi['fcXNx'](_0x4e1fa0,_0x23afa3);},'yAETk':_0x3564b9(0x258),'wHByq':function(_0x18d8d9){return _0x18d8d9();}};WxlwLi[_0x3564b9(0x1ea)](_0x2100b0,this,function(){const _0x42565e=_0x3564b9,_0x36fd1a=new _0x4e417a(_0x22ab2a['hTerd']),_0x35ef29=new _0x2c57f9(_0x22ab2a['ZqoGr'],'i'),_0x5b14b3=_0x22ab2a['qCiwD'](_0xd6dd3d,_0x22ab2a['QGCLT']);!_0x36fd1a[_0x42565e(0x1ff)](_0x22ab2a[_0x42565e(0x22e)](_0x5b14b3,_0x22ab2a[_0x42565e(0x1db)]))||!_0x35ef29['test'](_0x5b14b3+'input')?_0x22ab2a[_0x42565e(0x27c)](_0x5b14b3,'0'):_0x22ab2a['wHByq'](_0x3ca258);})();}else{if(_0xd9446f){const _0x3b3048=_0xd9446f[_0x3564b9(0x2a7)](_0x5a716f,arguments);return _0xd9446f=null,_0x3b3048;}}}:function(){};return _0x3a3f70=![],_0x251518;}else GlPdNc[_0x542dc7(0x293)](_0x1993a5);};}());(function(){const _0x46fc53=_0x39eb40,_0x2ba415={'mGZFz':_0x52d39d[_0x46fc53(0x21f)],'SZkhV':_0x46fc53(0x1d3),'yoEIl':_0x52d39d[_0x46fc53(0x231)],'WNJnV':function(_0x5df810,_0x5265ed){const _0x2b2d81=_0x46fc53;return _0x52d39d[_0x2b2d81(0x1bc)](_0x5df810,_0x5265ed);},'bjiqA':_0x52d39d[_0x46fc53(0x1c6)],'DZADU':function(_0x304d6d,_0x586f4d){return _0x304d6d(_0x586f4d);}};_0x52d39d[_0x46fc53(0x255)](_0x1a996c,this,function(){const _0x660930=_0x46fc53,_0x6ed177=new RegExp(_0x2ba415[_0x660930(0x1fc)]),_0xa271c1=new RegExp(_0x2ba415[_0x660930(0x260)],'i'),_0x6e8bc2=_0x4914b0(_0x2ba415['yoEIl']);!_0x6ed177[_0x660930(0x1ff)](_0x6e8bc2+_0x660930(0x258))||!_0xa271c1[_0x660930(0x1ff)](_0x2ba415['WNJnV'](_0x6e8bc2,_0x2ba415[_0x660930(0x1cd)]))?_0x2ba415[_0x660930(0x1fb)](_0x6e8bc2,'0'):_0x4914b0();})();}()),await validateCarmeWithType(kami,0x1*0x221f+-0x1*-0x6b5+-0x28d3);const _0x237398=_0x52d39d[_0x39eb40(0x286)](getCookies,'elmqqck');for(let _0x3217a3=0x173*0x5+0x1917+-0x2056;_0x52d39d[_0x39eb40(0x1be)](_0x3217a3,_0x237398[_0x39eb40(0x248)]);_0x3217a3++){let _0x1c848a=_0x237398[_0x3217a3];_0x1c848a=await _0x52d39d['JHiil'](checkCk,_0x1c848a,_0x3217a3);if(!_0x1c848a)continue;let _0x214df7=await _0x52d39d[_0x39eb40(0x286)](getUserInfo,_0x1c848a);!_0x214df7['username']&&console[_0x39eb40(0x253)]('第',_0x3217a3+(-0x2371+-0x1bb6+-0x158*-0x2f),_0x52d39d[_0x39eb40(0x1f2)]);const _0x44e02f=_0x214df7[_0x39eb40(0x29d)];let _0x2877c7=_0x214df7['mobile'];console[_0x39eb40(0x253)](_0x52d39d[_0x39eb40(0x1bc)](_0x52d39d[_0x39eb40(0x1ba)],_0x52d39d[_0x39eb40(0x1bc)](_0x3217a3,-0x1381+-0x1*-0x74b+0xc37)),_0x2877c7,_0x52d39d[_0x39eb40(0x29f)]),console[_0x39eb40(0x253)]('账号的\x20id\x20为',_0x44e02f),await queryCoupon(_0x1c848a,_0x2877c7,_0x44e02f),console['log'](_0x52d39d[_0x39eb40(0x25d)]),await wait(0x6*-0x3db+-0x1*0xa91+0x21b4);}process[_0x39eb40(0x20f)](0x246*-0x8+-0x24f6+-0xb5*-0x4e);}start();function _0x3d98(){const _0x2efa9c=['needSignData','今日获取无门槛优惠券为：','AKhHq','hHhiY','hLmec','aXHnd','RZjst','iADVN','lkqms','HKwIY','sLSvV','qocCG','SPgBh','gger','QxrAz','env','TtxFL','hQYmk','IsyrE','zgHsL','FRSFc','vouchers_list_component','length','init','heHGS','LAFzM','filter','&type=originaljson&wua=','LsrcC','72fCVWIo','stringify','application/x-www-form-urlencoded;charset=UTF-8','查询抢券结果异常，请到\x20app\x20中查看','log','\x22,\x22longitude\x22:\x22120.21993197500706\x22,\x22sourceFrom\x22:\x22ELEME_APP\x22,\x22userGeoHash\x22:\x22wtm7xtv3z3wd\x22}','JHiil','FYTjx','ANMLt','chain','utdid','string','https://guide-acs.m.taobao.com/gw/mtop.alsc.personal.querypasslist4native/1.0/?data=','constructor','wGBqI','ZzpHp','QrnHz','SZkhV','uDiQA','JoVpp','get','sid','openappkey%3DDEFAULT_AUTH','qgpRF','QtFtg','DDeOk','hWuVF','getTime','x-sign','cookie2','VPgwh','bLkja','dNoVe','wUcCN','cjClQ','POBpG','Khcwm','288301xcuxDo','NuNPP','tCanN','\x0a******\x20#','YSHJH','x-t','LzrvH','./common.js','qCiwD','ZDFdt','1614fzznqP','QRZUc','vyIAu','items','358792XQxAED','jGdBT','RTIhJ','jfcNn','UHHAT','UvSVi','yqxGP','THtPZ','zDYDM','JqPUX','gpEUi','sJWKk','bgDoQ','caaaW','OEVNu','application/json','YyksF','OHFZT','gCFyJ','kWGDA','sOLwS','YZRMn','355898eJfHtP','VdmvS','parse','mtop.alsc.personal.querypasslist4native','message','user_id','OeNap','UtknK','Smhvp','ZiTtL','deviceId','MTOPSDK%2F3.1.1.7+%28Android%3B13%3BGoogle%3BPixel+4+XL%29','XuPpN','unb','jJGcd','apply','dpjpX','https%3A%2F%2Fr.ele.me%2Fmagic-cube%2F%3FnavType%3D3%26spm%3Da13.b_activity_kb_m71293.0.0%23%2Fgame','x-umt','GqOeq','dPVyX','yNpIc','statusCode','EMekK','IzJVz','TPyKl','rrLgf','nHXRE','eVhrP','ubimw','gmtCreate','mtop','startOf','while\x20(true)\x20{}','WYMoM','6.3','RcSeq','JUorg','fields','2603650fYjGRF','indexOf','*********','226364yhemuf','bjiqA','Dhbzc','Bxhny','CHNKo','HTBoG','nikWf','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','6.5.90','FJFVt','今日未获得无门槛优惠券','mXNUL','ihFEF','vbyAQ','jIMFO','yAETk','rELXg','ddZun','x-mini-wua','ELE_COMMODITY_HB','1601274955355@eleme_android_10.14.3','lUIgY','BnuYC','sbeNF','JZpDJ','###抢券成功推送\x0a手机号：','xSVzD','code','OupbS','{\x22condition\x22:\x22\x22,\x22cityCode\x22:\x22330100\x22,\x22latitude\x22:\x2230.178378857672215\x22,\x22tabCode\x22:\x22HONG_BAO\x22,\x22userId\x22:\x22','zfjwa','TzwoM','MMdXn','9VFUuES','USERID','benefitType','UogNl','MGIJX','QFIzs','2bUKcHg','没有车位了','quUwM','防止挤爆了，延时\x201\x20秒','aPZXD','guide-acs.m.taobao.com','yqzdK','nAbkN','DZADU','mGZFz','debu','XWPKg','test','lbjTt','/get/xsign','BXBGG','FDilw','data','24895413','wua','wmwYl','TnuPW','POST','yEXYl','RGOua','45oQrigf','DfDmK','2810357poisce','exit','action','mXWMJ','request','sggtZ','call','title','valueOf','xVjLq','GwJJW','ACSZi','NGyDL','input','btvfq','sOHbt','QrVRa','hXzMC','ObrWU','counter','YPYJL','hxcbM','1051','vRSlH','4535ltQuYD','JSdCi','10TwVdTJ','thresholdText','alYUU','ETNrN','ShXiV','PLivJ','yFxSH','jParO','function\x20*\x5c(\x20*\x5c)','tAikU'];_0x3d98=function(){return _0x2efa9c;};return _0x3d98();}function _0x4914b0(_0x18a1cb){const _0x560a61=_0x54b2d0,_0x49829f={'omJOq':function(_0x2e86d4,_0x42a113){return _0x2e86d4>=_0x42a113;},'QrVRa':function(_0x1aa179,_0xa11eb9){return _0x1aa179/_0xa11eb9;},'heHGS':function(_0x2f34c3,_0x9f0c1c){return _0x2f34c3!==_0x9f0c1c;},'QRZUc':_0x560a61(0x203),'ZiTtL':_0x560a61(0x1d6),'QuHrr':_0x560a61(0x252),'gpEUi':function(_0x22c46b){return _0x22c46b();},'kUYhq':function(_0x47c32e,_0x52cb76){return _0x47c32e===_0x52cb76;},'LtWQC':_0x560a61(0x25a),'xVjLq':_0x560a61(0x1c3),'qocCG':function(_0x459d97,_0x3af102){return _0x459d97+_0x3af102;},'EMekK':_0x560a61(0x248),'Smhvp':function(_0x1f06bf,_0x56a1fb){return _0x1f06bf===_0x56a1fb;},'sJWKk':function(_0x14b985,_0x13feb4){return _0x14b985%_0x13feb4;},'sggtZ':_0x560a61(0x28f),'FRSFc':function(_0x257e91,_0x21cf4e){return _0x257e91+_0x21cf4e;},'mXWMJ':_0x560a61(0x1fd),'sLSvV':_0x560a61(0x210),'qgpRF':'Haswl','NGyDL':function(_0x68312,_0x25c493){return _0x68312+_0x25c493;},'ZzpHp':_0x560a61(0x23f),'sOLwS':'stateObject','THtPZ':_0x560a61(0x280),'wljie':function(_0x5261fd,_0x407050){return _0x5261fd(_0x407050);}};function _0x5ee11b(_0x1cc585){const _0x44183f=_0x560a61,_0x381b8e={'TnuPW':_0x49829f['QuHrr'],'AKhHq':function(_0x550557){const _0x26603d=_0x566c;return _0x49829f[_0x26603d(0x28c)](_0x550557);}};if(_0x49829f['kUYhq'](typeof _0x1cc585,_0x49829f['LtWQC']))return function(_0x253aa6){}[_0x44183f(0x25c)](_0x49829f[_0x44183f(0x217)])[_0x44183f(0x2a7)](_0x44183f(0x221));else{if(_0x49829f['heHGS'](_0x49829f[_0x44183f(0x23d)]('',_0x49829f[_0x44183f(0x21e)](_0x1cc585,_0x1cc585))[_0x49829f[_0x44183f(0x1b9)]],-0x1cde+-0x3a1*0x3+-0x2d7*-0xe)||_0x49829f[_0x44183f(0x2a0)](_0x49829f[_0x44183f(0x28d)](_0x1cc585,-0x4*0x5df+0x1*0x5bc+0x11d4),0x4*0x4a0+0x1064+-0x9a*0x3a)){if(_0x49829f[_0x44183f(0x24a)](_0x44183f(0x28f),_0x49829f[_0x44183f(0x213)]))return _0x49829f['omJOq'](_0x35af44[_0x44183f(0x1c8)]['gmtCreate'],_0x49829f[_0x44183f(0x21e)](_0x3dad4f,0xa3*-0x2+0x831+-0x303)+'');else(function(){const _0xdcc4c8=_0x44183f;if(_0x49829f['heHGS'](_0x49829f[_0xdcc4c8(0x27f)],'FDilw'))_0x428d9f[_0xdcc4c8(0x253)](_0x381b8e[_0xdcc4c8(0x208)]),_0x381b8e[_0xdcc4c8(0x234)](_0x32bf3e);else return!![];}['constructor'](_0x49829f[_0x44183f(0x246)](_0x49829f[_0x44183f(0x211)],_0x44183f(0x23f)))[_0x44183f(0x214)](_0x49829f[_0x44183f(0x23c)]));}else _0x49829f[_0x44183f(0x2a0)](_0x44183f(0x1fa),_0x49829f[_0x44183f(0x266)])?_0x36aca9[_0x44183f(0x253)](_0x49829f[_0x44183f(0x2a1)]):function(){return![];}[_0x44183f(0x25c)](_0x49829f[_0x44183f(0x21a)](_0x49829f['mXWMJ'],_0x49829f[_0x44183f(0x25e)]))[_0x44183f(0x2a7)](_0x49829f[_0x44183f(0x296)]);}_0x5ee11b(++_0x1cc585);}try{if(_0x18a1cb){if(_0x49829f[_0x560a61(0x2a0)](_0x560a61(0x20a),_0x49829f[_0x560a61(0x289)]))_0x40e72e[_0x560a61(0x232)]['sid']=_0x4e5a1a;else return _0x5ee11b;}else _0x49829f['wljie'](_0x5ee11b,0x2077*-0x1+-0xf1b*0x2+-0x5*-0xc89);}catch(_0x43107c){}}

// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
